@using MDD4All.UI.BlazorComponents.Dialog
@using SpecIFicator.DefaultPlugin.BlazorComponents;
@using SpecIFicator.DefaultPlugin.ViewModels;
@using SpecIFicator.DefaultPlugin.BlazorComponents.Document;
@using SpecIFicator.Framework.Configuration;



<div draggable="true"
     class="dragobject"
     @ondragend="OnDragEnd"
     @ondragstart="OnDragStart"
     @ontouchstart="OnTouchStart"
     @ontouchmove="OnTouchMove"
     style="@DataContext.Style">

    @if (DataContext.NodeViewModel.IsLoading)
    {
        <div>
            <span class="placeholder-glow">
                <span class="placeholder col-7"></span>
            </span>
        </div>
    }
    else
    {
        Type itemType = DynamicConfigurationManager.GetComponentType("DocumentItem",
        GetType().FullName,
        DataContext.NodeViewModel.RootResourceClassKey);


        if (itemType != null)
        {
            <div>
                <CascadingValue Value="@DataContext.NodeViewModel">
                    <DynamicComponent Type="@itemType"></DynamicComponent>
                </CascadingValue>

            </div>
        }
        else
        {
            <strong>Item type not found.</strong>
        }

        <div class="deletebutton">
            <button class="btn btn-outline-light"
                @onclick="() => DataContext.OnDeleteDesktopObjectCommand.Execute(null)"
                @ontouchstart="() => DataContext.OnDeleteDesktopObjectCommand.Execute(null)">
                x
            </button>
        </div>
    }

    

</div>


